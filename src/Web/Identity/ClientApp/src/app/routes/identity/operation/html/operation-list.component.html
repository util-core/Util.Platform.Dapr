
<nz-card [nzBordered]="false" [nzExtra]="tool" [nzTitle]="card_title">
    <ng-template #card_title="">
        <span [innerHTML]="'identity.operation.module'|i18n:{module:module?.name}"></span>-<span [innerHTML]="'identity.operation.title'|i18n"></span>
    </ng-template>
    <ng-template #tool="">
        <button (click)="openCreateDrawer()" *aclIf="'operation.create'" nz-button="" nz-tooltip="" nzType="primary" [nzTooltipTitle]="'identity.operation.create'|i18n"><span nz-icon="" nzType="plus"></span>{{'util.create'|i18n}}</button>
        <button (click)="openManageCommonOperation()" *aclIf="'commonOperation.view'" class="ml-md" nz-button="" nz-tooltip="" [nzTooltipTitle]="'identity.operation.manageCommonOperation'|i18n"><span nz-icon="" nzType="form"></span>{{'identity.operation.manageCommonOperation'|i18n}}</button>
        <a (click)="ts_tb.show()" class="ml-md card-tool-icon-btn" nz-tooltip="" [nzTooltipTitle]="'util.tableSettings'|i18n"><span nz-icon="" nzType="setting"></span></a>
    </ng-template>
    <nz-table #tb="" #x_tb="xTableExtend" (nzPageIndexChange)="x_tb.pageIndexChange($event)" (nzPageSizeChange)="x_tb.pageSizeChange($event)" order="SortId" url="operation" x-table-extend="" [(nzPageIndex)]="x_tb.queryParam.page" [(nzPageSize)]="x_tb.queryParam.pageSize" [(queryParam)]="queryParam" [nzBordered]="ts_tb.bordered" [nzCustomColumn]="ts_tb.columns" [nzData]="x_tb.dataSource" [nzFrontPagination]="false" [nzLoading]="x_tb.loading" [nzPageSizeOptions]="x_tb.pageSizeOptions" [nzScroll]="ts_tb.scroll" [nzShowQuickJumper]="true" [nzShowSizeChanger]="true" [nzShowTotal]="total_tb" [nzSize]="ts_tb.size" [nzTotal]="x_tb.total"><thead><tr><th (nzCheckedChange)="x_tb.masterToggle()" nzCellControl="util.checkbox" [nzChecked]="x_tb.isMasterChecked()" [nzDisabled]="!x_tb.dataSource.length" [nzIndeterminate]="x_tb.isMasterIndeterminate()" [nzLeft]="ts_tb.isLeft('util.checkbox')" [nzRight]="ts_tb.isRight('util.checkbox')" [nzShowCheckbox]="true" [titleAlign]="ts_tb.getTitleAlign('util.checkbox')"></th><th nzCellControl="util.lineNumber" [nzLeft]="ts_tb.isLeft('util.lineNumber')" [nzRight]="ts_tb.isRight('util.lineNumber')" [titleAlign]="ts_tb.getTitleAlign('util.lineNumber')">{{'util.lineNumber'|i18n}}</th><th (nzResizeEnd)="ts_tb.handleResize($event,'identity.operation.name')" (nzSortOrderChange)="x_tb.sortChange('name',$event)" nz-resizable="" nzBounds="window" nzCellControl="identity.operation.name" nzPreview="" [nzLeft]="ts_tb.isLeft('identity.operation.name')" [nzRight]="ts_tb.isRight('identity.operation.name')" [nzShowSort]="true" [nzSortFn]="true" [titleAlign]="ts_tb.getTitleAlign('identity.operation.name')">{{'identity.operation.name'|i18n}}<nz-resize-handle nzDirection="right"></nz-resize-handle></th><th (nzResizeEnd)="ts_tb.handleResize($event,'identity.operation.uri')" (nzSortOrderChange)="x_tb.sortChange('uri',$event)" nz-resizable="" nzBounds="window" nzCellControl="identity.operation.uri" nzPreview="" [nzLeft]="ts_tb.isLeft('identity.operation.uri')" [nzRight]="ts_tb.isRight('identity.operation.uri')" [nzShowSort]="true" [nzSortFn]="true" [titleAlign]="ts_tb.getTitleAlign('identity.operation.uri')">{{'identity.operation.uri'|i18n}}<nz-resize-handle nzDirection="right"></nz-resize-handle></th><th (nzResizeEnd)="ts_tb.handleResize($event,'identity.operation.isBase')" nz-resizable="" nzBounds="window" nzCellControl="identity.operation.isBase" nzPreview="" [nzLeft]="ts_tb.isLeft('identity.operation.isBase')" [nzRight]="ts_tb.isRight('identity.operation.isBase')" [titleAlign]="ts_tb.getTitleAlign('identity.operation.isBase')">{{'identity.operation.isBase'|i18n}}<nz-resize-handle nzDirection="right"></nz-resize-handle></th><th (nzResizeEnd)="ts_tb.handleResize($event,'identity.operation.remark')" (nzSortOrderChange)="x_tb.sortChange('remark',$event)" nz-resizable="" nzBounds="window" nzCellControl="identity.operation.remark" nzPreview="" [nzLeft]="ts_tb.isLeft('identity.operation.remark')" [nzRight]="ts_tb.isRight('identity.operation.remark')" [nzShowSort]="true" [nzSortFn]="true" [titleAlign]="ts_tb.getTitleAlign('identity.operation.remark')">{{'identity.operation.remark'|i18n}}<nz-resize-handle nzDirection="right"></nz-resize-handle></th><th (nzResizeEnd)="ts_tb.handleResize($event,'identity.operation.enabled')" (nzSortOrderChange)="x_tb.sortChange('enabled',$event)" nz-resizable="" nzBounds="window" nzCellControl="identity.operation.enabled" nzPreview="" [nzLeft]="ts_tb.isLeft('identity.operation.enabled')" [nzRight]="ts_tb.isRight('identity.operation.enabled')" [nzShowSort]="true" [nzSortFn]="true" [titleAlign]="ts_tb.getTitleAlign('identity.operation.enabled')">{{'identity.operation.enabled'|i18n}}<nz-resize-handle nzDirection="right"></nz-resize-handle></th><th (nzResizeEnd)="ts_tb.handleResize($event,'util.creationTime')" (nzSortOrderChange)="x_tb.sortChange('creationTime',$event)" nz-resizable="" nzBounds="window" nzCellControl="util.creationTime" nzPreview="" [nzLeft]="ts_tb.isLeft('util.creationTime')" [nzRight]="ts_tb.isRight('util.creationTime')" [nzShowSort]="true" [nzSortFn]="true" [titleAlign]="ts_tb.getTitleAlign('util.creationTime')">{{'util.creationTime'|i18n}}<nz-resize-handle nzDirection="right"></nz-resize-handle></th><th (nzResizeEnd)="ts_tb.handleResize($event,'util.lastModificationTime')" (nzSortOrderChange)="x_tb.sortChange('lastModificationTime',$event)" nz-resizable="" nzBounds="window" nzCellControl="util.lastModificationTime" nzPreview="" [nzLeft]="ts_tb.isLeft('util.lastModificationTime')" [nzRight]="ts_tb.isRight('util.lastModificationTime')" [nzShowSort]="true" [nzSortFn]="true" [titleAlign]="ts_tb.getTitleAlign('util.lastModificationTime')">{{'util.lastModificationTime'|i18n}}<nz-resize-handle nzDirection="right"></nz-resize-handle></th><th (nzResizeEnd)="ts_tb.handleResize($event,'util.operation')" nz-resizable="" nzBounds="window" nzCellControl="util.operation" nzPreview="" [nzLeft]="ts_tb.isLeft('util.operation')" [nzRight]="ts_tb.isRight('util.operation')" [titleAlign]="ts_tb.getTitleAlign('util.operation')">{{'util.operation'|i18n}}<nz-resize-handle nzDirection="right"></nz-resize-handle></th></tr></thead><tbody><tr *ngFor="let row of x_tb.dataSource;index as index">
        <td (click)="$event.stopPropagation()" (nzCheckedChange)="x_tb.toggle(row)" nzCellControl="util.checkbox" [nzAlign]="ts_tb.getAlign('util.checkbox')" [nzChecked]="x_tb.isChecked(row)" [nzLeft]="ts_tb.isLeft('util.checkbox')" [nzRight]="ts_tb.isRight('util.checkbox')" [nzShowCheckbox]="true"></td><td nzCellControl="util.lineNumber" [nzAlign]="ts_tb.getAlign('util.lineNumber')" [nzLeft]="ts_tb.isLeft('util.lineNumber')" [nzRight]="ts_tb.isRight('util.lineNumber')">{{row.lineNumber}}</td><td nzCellControl="identity.operation.name" [nzAlign]="ts_tb.getAlign('identity.operation.name')" [nzEllipsis]="ts_tb.getEllipsis('identity.operation.name')" [nzLeft]="ts_tb.isLeft('identity.operation.name')" [nzRight]="ts_tb.isRight('identity.operation.name')">{{row.name}}</td>
        <td nzCellControl="identity.operation.uri" [nzAlign]="ts_tb.getAlign('identity.operation.uri')" [nzEllipsis]="ts_tb.getEllipsis('identity.operation.uri')" [nzLeft]="ts_tb.isLeft('identity.operation.uri')" [nzRight]="ts_tb.isRight('identity.operation.uri')">{{row.uri}}</td>
        <td nzCellControl="identity.operation.isBase" [nzAlign]="ts_tb.getAlign('identity.operation.isBase')" [nzEllipsis]="ts_tb.getEllipsis('identity.operation.isBase')" [nzLeft]="ts_tb.isLeft('identity.operation.isBase')" [nzRight]="ts_tb.isRight('identity.operation.isBase')"><i *ngIf="!row.isBase" nz-icon nzType="close"></i>
<i *ngIf="row.isBase" nz-icon nzType="check"></i>
</td>
        <td nzCellControl="identity.operation.remark" [nzAlign]="ts_tb.getAlign('identity.operation.remark')" [nzEllipsis]="ts_tb.getEllipsis('identity.operation.remark')" [nzLeft]="ts_tb.isLeft('identity.operation.remark')" [nzRight]="ts_tb.isRight('identity.operation.remark')">{{row.remark}}</td>
        <td nzCellControl="identity.operation.enabled" [nzAlign]="ts_tb.getAlign('identity.operation.enabled')" [nzEllipsis]="ts_tb.getEllipsis('identity.operation.enabled')" [nzLeft]="ts_tb.isLeft('identity.operation.enabled')" [nzRight]="ts_tb.isRight('identity.operation.enabled')">
            <nz-tag *ngIf="row.enabled" nzColor="geekblue">{{'util.enabled'|i18n}}</nz-tag>
            <nz-tag *ngIf="!row.enabled" nzColor="red">{{'util.notEnabled'|i18n}}</nz-tag>
        </td>
        <td nzCellControl="util.creationTime" [nzAlign]="ts_tb.getAlign('util.creationTime')" [nzEllipsis]="ts_tb.getEllipsis('util.creationTime')" [nzLeft]="ts_tb.isLeft('util.creationTime')" [nzRight]="ts_tb.isRight('util.creationTime')">{{row.creationTime|date:'yyyy-MM-dd HH:mm'}}</td>
        <td nzCellControl="util.lastModificationTime" [nzAlign]="ts_tb.getAlign('util.lastModificationTime')" [nzEllipsis]="ts_tb.getEllipsis('util.lastModificationTime')" [nzLeft]="ts_tb.isLeft('util.lastModificationTime')" [nzRight]="ts_tb.isRight('util.lastModificationTime')">{{row.lastModificationTime|date:'yyyy-MM-dd HH:mm'}}</td>
        <td nzCellControl="util.operation" [nzAlign]="ts_tb.getAlign('util.operation')" [nzEllipsis]="ts_tb.getEllipsis('util.operation')" [nzLeft]="ts_tb.isLeft('util.operation')" [nzRight]="ts_tb.isRight('util.operation')">
            <a (click)="openDetailDialog(row)">{{'util.detail'|i18n}}</a>
            <ng-container *aclIf="'operation.update'">
                <nz-divider nzType="vertical"></nz-divider>
                <a (click)="openEditDrawer(row)">{{'util.update'|i18n}}</a>
            </ng-container>
            <ng-container *aclIf="'operation.delete'">
                <nz-divider nzType="vertical"></nz-divider>
                <a (click)="delete(row.id)" class="ant-btn-dangerous">{{'util.delete'|i18n}}</a>
            </ng-container>
        </td>
    </tr></tbody></nz-table><ng-template #total_tb="" let-range="range" let-total="">{{ 'util.tableTotalTemplate'|i18n:{start:range[0],end:range[1],total:total} }}</ng-template><x-table-settings #ts_tb="" key="identity_operation" [enableFixedColumn]="true" [initColumns]="[{'title':'util.checkbox','width':x_tb.config.table.checkboxWidth,'align':'left'},{'title':'util.lineNumber','width':x_tb.config.table.lineNumberWidth,'align':'left'},{'title':'identity.operation.name'},{'title':'identity.operation.uri'},{'title':'identity.operation.isBase'},{'title':'identity.operation.remark'},{'title':'identity.operation.enabled'},{'title':'util.creationTime'},{'title':'util.lastModificationTime'},{'title':'util.operation'}]"></x-table-settings>
</nz-card>

<footer-toolbar *ngIf="isChecked()" [extra]="footer_info">
    <ng-template #footer_info="">
        <span [innerHTML]="'app.rowsSelected'|i18n:{length:getCheckedLength()}"></span>
    </ng-template>
    <button (click)="delete()" *aclIf="'operation.delete'" nz-button="" nz-tooltip="" nzType="primary" [nzDanger]="true" [nzTooltipTitle]="'identity.operation.delete'|i18n"><span nz-icon="" nzType="delete"></span>{{'util.delete'|i18n}}</button>
</footer-toolbar>