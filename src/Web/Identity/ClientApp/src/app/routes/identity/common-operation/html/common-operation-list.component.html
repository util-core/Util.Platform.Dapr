

<nz-card class="searchForm" [nzBorderless]="true">
    <form nz-form="">
        <div nz-row="" [nzGutter]="24">
            <div nz-col="" [nzLg]="8" [nzMd]="12" [nzSm]="24" [nzXl]="8" [nzXs]="24" [nzXXl]="6">
                <nz-form-item><nz-form-label style="width:120px">{{'identity.commonOperation.name'|i18n}}</nz-form-label><nz-form-control><nz-input-group [nzSuffix]="tmp_name"><input #model_name="ngModel" #name="" name="name" nz-input="" [(ngModel)]="queryParam.name" /></nz-input-group><ng-template #tmp_name=""><i (click)="model_name.reset()" *ngIf="model_name.value" class="ant-input-clear-icon" nz-icon="" nzTheme="fill" nzType="close-circle"></i></ng-template></nz-form-control></nz-form-item>
            </div>
            <div nz-col="" [nzLg]="8" [nzMd]="12" [nzSm]="24" [nzXl]="8" [nzXs]="24" [nzXXl]="6">
                <nz-form-item><nz-form-label style="width:120px">{{'identity.commonOperation.enabled'|i18n}}</nz-form-label><nz-form-control><nz-select #enabled="" #x_enabled="xSelectExtend" name="enabled" x-select-extend="" [(ngModel)]="queryParam.enabled" [data]="[{'text':'util.yes','value':true,'sortId':1},{'text':'util.no','value':false,'sortId':2}]"><nz-option [nzLabel]="'util.defaultOptionText'|i18n"></nz-option><ng-container *ngIf="!x_enabled.isGroup"><nz-option *ngFor="let item of x_enabled.options" [nzDisabled]="item.disabled" [nzLabel]="item.text|i18n" [nzValue]="item.value"></nz-option></ng-container><ng-container *ngIf="x_enabled.isGroup"><nz-option-group *ngFor="let group of x_enabled.optionGroups" [nzLabel]="group.text|i18n"><nz-option *ngFor="let item of group.value" [nzDisabled]="item.disabled" [nzLabel]="item.text|i18n" [nzValue]="item.value"></nz-option></nz-option-group></ng-container></nz-select></nz-form-control></nz-form-item>
            </div>
            <div nz-col="" [nzLg]="8" [nzMd]="12" [nzSm]="24" [nzXl]="8" [nzXs]="24" [nzXXl]="6">
                <nz-form-item><nz-form-label style="width:120px">{{'identity.commonOperation.remark'|i18n}}</nz-form-label><nz-form-control><nz-input-group [nzSuffix]="tmp_remark"><input #model_remark="ngModel" #remark="" name="remark" nz-input="" [(ngModel)]="queryParam.remark" /></nz-input-group><ng-template #tmp_remark=""><i (click)="model_remark.reset()" *ngIf="model_remark.value" class="ant-input-clear-icon" nz-icon="" nzTheme="fill" nzType="close-circle"></i></ng-template></nz-form-control></nz-form-item>
            </div>
            <div class="mb-md" nz-col="" [nzLg]="{span:expand?24:24}" [nzMd]="{span:expand?12:12}" [nzSm]="24" [nzXl]="{span:expand?24:24}" [nzXs]="24" [nzXXl]="{span:expand?6:6}">
                <div nz-flex="" nzAlign="center" nzGap="small" nzJustify="flex-end">
                    <button #btnRefresh="" (click)="refresh()" nz-button="" type="button"><i nz-icon="" nzType="sync"></i>{{'util.reset'|i18n}}</button>
                    <button #btnQuery="" (click)="query(btnQuery)" nz-button="" nzType="primary" type="button"><i nz-icon="" nzType="search"></i>{{'util.query'|i18n}}</button>
                    
                </div>
            </div>
        </div>
    </form>
</nz-card>

<nz-card [nzBorderless]="true" [nzExtra]="tool" [nzTitle]="'identity.commonOperation'|i18n">
    <ng-template #tool="">
        <button (click)="add()" *aclIf="'commonOperation.create'" nz-button=""><i nz-icon="" nzType="plus"></i>{{'util.create'|i18n}}</button>
        <button #btn_save="" (click)="save(btn_save)" *aclIf="'commonOperation.save'" nz-button="" nzType="primary"><i nz-icon="" nzType="save"></i>{{'util.save'|i18n}}</button>
        <a (click)="ts_tb.show()" class="ml-md card-tool-icon-btn" nz-tooltip="" [nzTooltipTitle]="'util.tableSettings'|i18n"><i nz-icon="" nzType="setting"></i></a>
    </ng-template>
    <nz-table #e_tb="xEditTable" #tb="" #x_tb="xTableExtend" (nzPageIndexChange)="x_tb.pageIndexChange($event)" (nzPageSizeChange)="x_tb.pageSizeChange($event)" order="SortId" url="commonOperation" x-edit-table="" x-table-extend="" [(nzPageIndex)]="x_tb.queryParam.page" [(nzPageSize)]="x_tb.queryParam.pageSize" [(queryParam)]="queryParam" [isBatch]="true" [nzBordered]="ts_tb.bordered" [nzCustomColumn]="ts_tb.columns" [nzData]="x_tb.dataSource" [nzFrontPagination]="false" [nzLoading]="x_tb.loading" [nzPageSizeOptions]="x_tb.pageSizeOptions" [nzScroll]="ts_tb.scroll" [nzShowQuickJumper]="true" [nzShowSizeChanger]="true" [nzShowTotal]="total_tb" [nzSize]="ts_tb.size" [nzTotal]="x_tb.total"><thead><tr><th (nzCheckedChange)="x_tb.masterToggle()" nzCellControl="util.checkbox" [nzChecked]="x_tb.isMasterChecked()" [nzDisabled]="!x_tb.dataSource.length" [nzIndeterminate]="x_tb.isMasterIndeterminate()" [nzLeft]="ts_tb.isLeft('util.checkbox')" [nzRight]="ts_tb.isRight('util.checkbox')" [nzShowCheckbox]="true" [titleAlign]="ts_tb.getTitleAlign('util.checkbox')"></th><th nzCellControl="util.lineNumber" [nzLeft]="ts_tb.isLeft('util.lineNumber')" [nzRight]="ts_tb.isRight('util.lineNumber')" [titleAlign]="ts_tb.getTitleAlign('util.lineNumber')">{{'util.lineNumber'|i18n}}</th><th (nzResizeEnd)="ts_tb.handleResize($event,'identity.commonOperation.name')" (nzSortOrderChange)="x_tb.sortChange('name',$event)" nz-resizable="" nzBounds="window" nzCellControl="identity.commonOperation.name" nzPreview="" [nzLeft]="ts_tb.isLeft('identity.commonOperation.name')" [nzRight]="ts_tb.isRight('identity.commonOperation.name')" [nzShowSort]="true" [nzSortFn]="true" [titleAlign]="ts_tb.getTitleAlign('identity.commonOperation.name')">{{'identity.commonOperation.name'|i18n}}<nz-resize-handle nzDirection="right"></nz-resize-handle></th><th (nzResizeEnd)="ts_tb.handleResize($event,'identity.commonOperation.enabled')" (nzSortOrderChange)="x_tb.sortChange('enabled',$event)" nz-resizable="" nzBounds="window" nzCellControl="identity.commonOperation.enabled" nzPreview="" [nzLeft]="ts_tb.isLeft('identity.commonOperation.enabled')" [nzRight]="ts_tb.isRight('identity.commonOperation.enabled')" [nzShowSort]="true" [nzSortFn]="true" [titleAlign]="ts_tb.getTitleAlign('identity.commonOperation.enabled')">{{'identity.commonOperation.enabled'|i18n}}<nz-resize-handle nzDirection="right"></nz-resize-handle></th><th (nzResizeEnd)="ts_tb.handleResize($event,'identity.commonOperation.sortId')" (nzSortOrderChange)="x_tb.sortChange('sortId',$event)" nz-resizable="" nzBounds="window" nzCellControl="identity.commonOperation.sortId" nzPreview="" [nzLeft]="ts_tb.isLeft('identity.commonOperation.sortId')" [nzRight]="ts_tb.isRight('identity.commonOperation.sortId')" [nzShowSort]="true" [nzSortFn]="true" [titleAlign]="ts_tb.getTitleAlign('identity.commonOperation.sortId')">{{'identity.commonOperation.sortId'|i18n}}<nz-resize-handle nzDirection="right"></nz-resize-handle></th><th (nzResizeEnd)="ts_tb.handleResize($event,'identity.commonOperation.remark')" (nzSortOrderChange)="x_tb.sortChange('remark',$event)" nz-resizable="" nzBounds="window" nzCellControl="identity.commonOperation.remark" nzPreview="" [nzLeft]="ts_tb.isLeft('identity.commonOperation.remark')" [nzRight]="ts_tb.isRight('identity.commonOperation.remark')" [nzShowSort]="true" [nzSortFn]="true" [titleAlign]="ts_tb.getTitleAlign('identity.commonOperation.remark')">{{'identity.commonOperation.remark'|i18n}}<nz-resize-handle nzDirection="right"></nz-resize-handle></th><th (nzResizeEnd)="ts_tb.handleResize($event,'util.operation')" *aclIf="'commonOperation.save'" nz-resizable="" nzBounds="window" nzCellControl="util.operation" nzPreview="" [nzLeft]="ts_tb.isLeft('util.operation')" [nzRight]="ts_tb.isRight('util.operation')" [titleAlign]="ts_tb.getTitleAlign('util.operation')">{{'util.operation'|i18n}}<nz-resize-handle nzDirection="right"></nz-resize-handle></th></tr></thead><tbody><tr #tb_row="xEditRow" (click)="e_tb.clickEdit(row.id)" (dblclick)="e_tb.dblClickEdit(row.id)" *ngFor="let row of x_tb.dataSource;index as index" [x-edit-row]="row">
        <td (click)="$event.stopPropagation()" (nzCheckedChange)="x_tb.toggle(row)" nzCellControl="util.checkbox" [nzAlign]="ts_tb.getAlign('util.checkbox')" [nzChecked]="x_tb.isChecked(row)" [nzLeft]="ts_tb.isLeft('util.checkbox')" [nzRight]="ts_tb.isRight('util.checkbox')" [nzShowCheckbox]="true"></td><td nzCellControl="util.lineNumber" [nzAlign]="ts_tb.getAlign('util.lineNumber')" [nzLeft]="ts_tb.isLeft('util.lineNumber')" [nzRight]="ts_tb.isRight('util.lineNumber')">{{row.lineNumber}}</td><td nzCellControl="identity.commonOperation.name" [nzAlign]="ts_tb.getAlign('identity.commonOperation.name')" [nzEllipsis]="ts_tb.getEllipsis('identity.commonOperation.name')" [nzLeft]="ts_tb.isLeft('identity.commonOperation.name')" [nzRight]="ts_tb.isRight('identity.commonOperation.name')"><ng-container *ngIf="e_tb.editId !== row.id;else e_tb_name">{{row.name}}</ng-container><ng-template #e_tb_name="">
            <nz-form-item class="mb0"><nz-form-control [nzErrorTip]="vt_control_name"><nz-input-group [nzSuffix]="tmp_control_name"><input #control_name="" #model_control_name="ngModel" #v_control_name="xValidationExtend" displayName="identity.commonOperation.name" name="control_name" nz-input="" x-validation-extend="" [(ngModel)]="row.name" [editRow]="tb_row" [maxlength]="50" [x-edit-control]="control_name" [x-required-extend]="true" /></nz-input-group><ng-template #tmp_control_name=""><i (click)="model_control_name.reset()" *ngIf="model_control_name.value" class="ant-input-clear-icon" nz-icon="" nzTheme="fill" nzType="close-circle"></i></ng-template><ng-template #vt_control_name="">{{v_control_name.getErrorMessage()}}</ng-template></nz-form-control></nz-form-item>
        </ng-template></td>
        <td nzCellControl="identity.commonOperation.enabled" [nzAlign]="ts_tb.getAlign('identity.commonOperation.enabled')" [nzEllipsis]="ts_tb.getEllipsis('identity.commonOperation.enabled')" [nzLeft]="ts_tb.isLeft('identity.commonOperation.enabled')" [nzRight]="ts_tb.isRight('identity.commonOperation.enabled')">
            <ng-container *ngIf="e_tb.editId !== row.id;else e_tb_enabled">
                <nz-tag *ngIf="row.enabled" nzColor="geekblue">{{'util.enabled'|i18n}}</nz-tag>
                <nz-tag *ngIf="!row.enabled" nzColor="red">{{'util.notEnabled'|i18n}}</nz-tag>
            </ng-container>
            <ng-template #e_tb_enabled="">
                <nz-form-item class="mb0"><nz-form-control><nz-select #control_enabled="" #x_control_enabled="xSelectExtend" name="control_enabled" x-select-extend="" [(ngModel)]="row.enabled" [data]="[{'text':'util.yes','value':true,'sortId':1},{'text':'util.no','value':false,'sortId':2}]" [editRow]="tb_row" [x-edit-control]="control_enabled"><nz-option [nzLabel]="'util.defaultOptionText'|i18n"></nz-option><ng-container *ngIf="!x_control_enabled.isGroup"><nz-option *ngFor="let item of x_control_enabled.options" [nzDisabled]="item.disabled" [nzLabel]="item.text|i18n" [nzValue]="item.value"></nz-option></ng-container><ng-container *ngIf="x_control_enabled.isGroup"><nz-option-group *ngFor="let group of x_control_enabled.optionGroups" [nzLabel]="group.text|i18n"><nz-option *ngFor="let item of group.value" [nzDisabled]="item.disabled" [nzLabel]="item.text|i18n" [nzValue]="item.value"></nz-option></nz-option-group></ng-container></nz-select></nz-form-control></nz-form-item>
            </ng-template>
        </td>
        <td nzCellControl="identity.commonOperation.sortId" [nzAlign]="ts_tb.getAlign('identity.commonOperation.sortId')" [nzEllipsis]="ts_tb.getEllipsis('identity.commonOperation.sortId')" [nzLeft]="ts_tb.isLeft('identity.commonOperation.sortId')" [nzRight]="ts_tb.isRight('identity.commonOperation.sortId')"><ng-container *ngIf="e_tb.editId !== row.id;else e_tb_sortId">{{row.sortId}}</ng-container><ng-template #e_tb_sortId="">
            <nz-form-item class="mb0"><nz-form-control><nz-input-number #control_sort_id="" name="control_sort_id" [(ngModel)]="row.sortId" [editRow]="tb_row" [x-edit-control]="control_sort_id"></nz-input-number></nz-form-control></nz-form-item>
        </ng-template></td>
        <td nzCellControl="identity.commonOperation.remark" [nzAlign]="ts_tb.getAlign('identity.commonOperation.remark')" [nzEllipsis]="ts_tb.getEllipsis('identity.commonOperation.remark')" [nzLeft]="ts_tb.isLeft('identity.commonOperation.remark')" [nzRight]="ts_tb.isRight('identity.commonOperation.remark')"><ng-container *ngIf="e_tb.editId !== row.id;else e_tb_remark">{{row.remark}}</ng-container><ng-template #e_tb_remark="">
            <nz-form-item class="mb0"><nz-form-control [nzErrorTip]="vt_control_remark"><nz-input-group [nzSuffix]="tmp_control_remark"><input #control_remark="" #model_control_remark="ngModel" #v_control_remark="xValidationExtend" displayName="identity.commonOperation.remark" name="control_remark" nz-input="" x-validation-extend="" [(ngModel)]="row.remark" [editRow]="tb_row" [maxlength]="500" [x-edit-control]="control_remark" /></nz-input-group><ng-template #tmp_control_remark=""><i (click)="model_control_remark.reset()" *ngIf="model_control_remark.value" class="ant-input-clear-icon" nz-icon="" nzTheme="fill" nzType="close-circle"></i></ng-template><ng-template #vt_control_remark="">{{v_control_remark.getErrorMessage()}}</ng-template></nz-form-control></nz-form-item>
        </ng-template></td>
        <td *aclIf="'commonOperation.save'" nzCellControl="util.operation" [nzAlign]="ts_tb.getAlign('util.operation')" [nzEllipsis]="ts_tb.getEllipsis('util.operation')" [nzLeft]="ts_tb.isLeft('util.operation')" [nzRight]="ts_tb.isRight('util.operation')">
            <a (click)="edit(row.id)" *ngIf="!isEdit(row.id)">{{'util.update'|i18n}}</a>
            <a (click)="unedit()" *ngIf="isEdit(row.id)">{{'util.unedit'|i18n}}</a>
            <ng-container *aclIf="'commonOperation.delete'">
                <nz-divider nzType="vertical"></nz-divider>
                <a (click)="remove(row.id)" class="ant-btn-dangerous">{{'util.delete'|i18n}}</a>
            </ng-container>
        </td>
    </tr></tbody></nz-table><ng-template #total_tb="" let-range="range" let-total="">{{ 'util.tableTotalTemplate'|i18n:{start:range[0],end:range[1],total:total} }}</ng-template><x-table-settings #ts_tb="" key="identity_common_operation" [enableFixedColumn]="true" [initColumns]="[{'title':'util.checkbox','width':x_tb.config.table.checkboxWidth,'align':'left'},{'title':'util.lineNumber','width':x_tb.config.table.lineNumberWidth,'align':'left'},{'title':'identity.commonOperation.name'},{'title':'identity.commonOperation.enabled'},{'title':'identity.commonOperation.sortId'},{'title':'identity.commonOperation.remark'},{'title':'util.operation','acl':'commonOperation.save'}]"></x-table-settings>
</nz-card>

<div *nzModalFooter="">
    <ng-container *ngIf="isChecked()">
        <span class="mr-md" [innerHTML]="'app.rowsSelected'|i18n:{length:getCheckedLength()}"></span>
    </ng-container>
    <button (click)="close()" nz-button="">{{'util.cancel'|i18n}}</button>
    <ng-container *ngIf="isChecked()">
        <button (click)="remove()" *aclIf="'commonOperation.delete'" nz-button="" nzType="primary" [nzDanger]="true">{{'util.delete'|i18n}}</button>
    </ng-container>
</div>
