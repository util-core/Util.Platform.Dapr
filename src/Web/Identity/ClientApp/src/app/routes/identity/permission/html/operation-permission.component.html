
<nz-card [nzBorderless]="true" [nzExtra]="tool" [nzTitle]="getTitle()">
    <ng-template #tool="">
        <a (click)="ts_tb.show()" class="card-tool-icon-btn" nz-tooltip="" [nzTooltipTitle]="'util.tableSettings'|i18n"><i nz-icon="" nzType="setting"></i></a>
    </ng-template>
    <nz-table #tb="" #x_tb="xTreeTableExtend" (nzPageIndexChange)="x_tb.pageIndexChange($event)" (nzPageSizeChange)="x_tb.pageSizeChange($event)" order="SortId" url="operationPermission" x-tree-table-extend="" [(nzPageIndex)]="x_tb.queryParam.page" [(nzPageSize)]="x_tb.queryParam.pageSize" [(queryParam)]="queryParam" [autoLoad]="false" [isExpandAll]="true" [nzBordered]="ts_tb.bordered" [nzCustomColumn]="ts_tb.columns" [nzData]="x_tb.dataSource" [nzFrontPagination]="false" [nzLoading]="x_tb.loading" [nzScroll]="ts_tb.scroll" [nzShowPagination]="false" [nzShowQuickJumper]="true" [nzShowSizeChanger]="true" [nzShowTotal]="total_tb" [nzSize]="ts_tb.size" [nzTotal]="x_tb.total"><thead><tr><th (nzResizeEnd)="ts_tb.handleResize($event,'identity.operationPermission.name')" nz-resizable="" nzBounds="window" nzCellControl="identity.operationPermission.name" nzPreview="" [nzLeft]="ts_tb.isLeft('identity.operationPermission.name')" [nzRight]="ts_tb.isRight('identity.operationPermission.name')"><label (nzCheckedChange)="x_tb.masterToggle()" nz-checkbox="" [nzChecked]="x_tb.isMasterChecked()" [nzIndeterminate]="x_tb.isMasterIndeterminate()">{{'identity.operationPermission.name'|i18n}}</label><nz-resize-handle nzDirection="right"></nz-resize-handle></th><th (nzResizeEnd)="ts_tb.handleResize($event,'util.operation')" nz-resizable="" nzBounds="window" nzCellControl="util.operation" nzPreview="" [nzLeft]="ts_tb.isLeft('util.operation')" [nzRight]="ts_tb.isRight('util.operation')" [titleAlign]="ts_tb.getTitleAlign('util.operation')">{{'util.operation'|i18n}}<nz-resize-handle nzDirection="right"></nz-resize-handle></th></tr></thead><tbody><ng-container *ngFor="let row of x_tb.dataSource;index as index"><tr *ngIf="x_tb.isShow(row)">
        <td (nzExpandChange)="x_tb.collapse(row,$event)" nzCellControl="identity.operationPermission.name" [nzEllipsis]="ts_tb.getEllipsis('identity.operationPermission.name')" [nzExpand]="x_tb.isExpand(row)" [nzIndentSize]="row.level*x_tb.config.table.indentUnitWidth" [nzLeft]="ts_tb.isLeft('identity.operationPermission.name')" [nzRight]="ts_tb.isRight('identity.operationPermission.name')" [nzShowExpand]="!x_tb.isLeaf(row)"><label (nzCheckedChange)="x_tb.toggle(row)" nz-checkbox="" [nzChecked]="x_tb.isChecked(row)" [nzIndeterminate]="x_tb.isIndeterminate(row)">{{row.name}}</label></td>
        <td nzCellControl="util.operation" [nzAlign]="ts_tb.getAlign('util.operation')" [nzEllipsis]="ts_tb.getEllipsis('util.operation')" [nzLeft]="ts_tb.isLeft('util.operation')" [nzRight]="ts_tb.isRight('util.operation')">
            <label (nzCheckedChange)="check(item,row)" *ngFor="let item of getOperations(row)" nz-checkbox="" [nzChecked]="x_tb.isChecked(item)">{{item.name}}</label>
        </td>
    </tr></ng-container></tbody></nz-table><ng-template #total_tb="" let-range="range" let-total="">{{ 'util.tableTotalTemplate'|i18n:{start:range[0],end:range[1],total:total} }}</ng-template><x-table-settings #ts_tb="" key="identity_operation_permission" [enableFixedColumn]="true" [initColumns]="[{'title':'identity.operationPermission.name','width':'300'},{'title':'util.operation','width':'800'}]" [isTreeTable]="true"></x-table-settings>
</nz-card>